<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Segoe UI', Arial, sans-serif; font-size: 12px; color: #333; }

  .header { background: #2c3e50; padding: 15px 20px; position: relative; }
  .header-top { background: #34495e; padding: 10px 20px; text-align: center; }
  .school-name { color: #ecf0f1; font-size: 20px; font-weight: bold; letter-spacing: 1px; }
  .school-subtitle { color: #bdc3c7; font-size: 11px; margin-top: 4px; }
  .report-title-box {
    background: #ecf0f1; border: 1px solid #bdc3c7;
    display: inline-block; padding: 5px 25px; margin-top: 8px;
    font-size: 14px; font-weight: bold; color: #2c3e50;
  }
  .header-accent { height: 3px; background: #3498db; }

  .header-top { position: relative; }
  .logo-img {
    position: absolute; left: 20px; top: 50%; transform: translateY(-50%);
    width: 44px; height: 44px; border-radius: 50%; object-fit: contain;
    background: #ecf0f1; border: 2px solid #3498db; padding: 2px;
  }

  .student-info {
    background: #f8f9fa; border: 1px solid #e9ecef;
    padding: 10px 15px; margin: 12px 0;
    display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 6px;
  }
  .info-item { font-size: 10px; }
  .info-label { font-weight: bold; color: #2c3e50; }
  .info-value { color: #2c3e50; font-weight: bold; }

  .results-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
  .results-table thead th {
    background: #34495e; color: #ecf0f1;
    padding: 8px 4px; font-size: 10px; text-align: center;
    border-top: 3px solid #3498db;
  }
  .results-table tbody td {
    padding: 6px 4px; text-align: center; font-size: 10px;
    border-bottom: 1px solid #e9ecef;
  }
  .results-table tbody tr:nth-child(even) { background: #f8f9fa; }
  .results-table tbody tr:nth-child(odd) { background: #ffffff; }
  .subject-name { text-align: left !important; font-weight: bold; padding-left: 8px !important; }
  .total-cell { font-weight: bold; color: #2c3e50; font-size: 11px; }
  .results-table { border: 2px solid #34495e; }

  .summary-box {
    background: #ecf0f1; border: 1px solid #bdc3c7;
    padding: 8px 15px; margin-top: 12px;
    border-top: 3px solid #3498db;
  }
  .summary-title { font-size: 12px; font-weight: bold; color: #2c3e50; margin-bottom: 4px; }
  .summary-text { font-size: 10px; color: #495057; }

  .remarks-box {
    background: #f8f9fa; border: 1px solid #e9ecef;
    padding: 8px 15px; margin-top: 10px;
  }
  .remarks-title { font-weight: bold; font-size: 11px; color: #2c3e50; margin-bottom: 4px; }
  .remarks-text { font-size: 10px; color: #495057; line-height: 1.4; }

  .signatures {
    background: #f8f9fa; border: 1px solid #e9ecef;
    padding: 10px 15px; margin-top: 10px;
  }
  .signature-row { display: flex; justify-content: space-between; margin-bottom: 8px; }
  .signature-label { font-weight: bold; font-size: 10px; color: #2c3e50; }
  .signature-line { flex: 1; border-bottom: 1px solid #bdc3c7; margin-left: 10px; margin-bottom: 2px; }

  .footer {
    background: #2c3e50; color: #ecf0f1;
    padding: 6px 20px; margin-top: 15px;
    display: flex; justify-content: space-between;
    font-size: 9px;
  }

  .grading-key {
    margin-top: 10px; display: inline-block;
  }
  .grading-key table { border-collapse: collapse; font-size: 9px; }
  .grading-key th { background: #34495e; color: #ecf0f1; padding: 3px 8px; }
  .grading-key td { border: 1px solid #ddd; padding: 3px 8px; text-align: center; }
</style>
</head>
<body>

<div class="header-top">
  <img class="logo-img" src="{{logoSrc}}" alt="Logo">
  <div class="school-name">{{school.name}}</div>
  {{#if school.motto}}
  <div class="school-subtitle">
    {{school.motto}}{{#if school.address}} &bull; {{school.address}}{{/if}}
  </div>
  {{/if}}
  <div class="report-title-box">ACADEMIC REPORT CARD</div>
</div>
<div class="header-accent"></div>

<div style="padding: 0 15px;">

  <div class="student-info">
    <div class="info-item">
      <span class="info-label">NAME: </span>
      <span class="info-value">{{student.fullName}}</span>
    </div>
    <div class="info-item">
      <span class="info-label">STUDENT NO: </span>
      <span class="info-value">{{student.studentNo}}</span>
    </div>
    <div class="info-item">
      <span class="info-label">CLASS: </span>
      <span class="info-value">{{student.classArm.level.name}} {{student.classArm.name}}</span>
    </div>
    <div class="info-item">
      <span class="info-label">SESSION: </span>
      <span class="info-value">{{academicSession.academicYear}}</span>
    </div>
    <div class="info-item">
      <span class="info-label">TERM: </span>
      <span class="info-value">{{term.name}}</span>
    </div>
    <div class="info-item">
      <span class="info-label">PERIOD: </span>
      <span class="info-value">{{termStartDate}} - {{termEndDate}}</span>
    </div>
  </div>

  <table class="results-table">
    <thead>
      <tr>
        <th style="width:30px">S/N</th>
        <th style="text-align:left; padding-left:8px;">Subject</th>
        {{#each assessmentStructures}}
        <th>{{this.name}}<br><small>({{this.maxScore}})</small></th>
        {{/each}}
        <th>Total</th>
        <th>Grade</th>
        <th style="width:70px">Remarks</th>
      </tr>
    </thead>
    <tbody>
      {{#each subjects}}
      <tr>
        <td>{{this.serialNumber}}</td>
        <td class="subject-name">{{this.name}}</td>
        {{#each this.assessments}}
        <td style="color: {{#if this.score}}{{../scoreColor}}{{else}}#999{{/if}}; font-weight: bold;">
          {{#if this.score}}{{this.score}}{{else}}-{{/if}}
        </td>
        {{/each}}
        <td class="total-cell">{{this.totalScore}}</td>
        <td style="color: {{this.gradeColor}}; font-weight: bold; font-size: 11px;">{{or this.grade "-"}}</td>
        <td style="color: {{this.remarkColor}}; font-weight: bold; font-size: 9px;">{{this.remark}}</td>
      </tr>
      {{/each}}
    </tbody>
  </table>

  <div class="summary-box">
    <div class="summary-title">Academic Summary</div>
    <div class="summary-text">
      Total Subjects: {{overallStats.totalSubjects}} &bull;
      Total Score: {{overallStats.totalScore}} &bull;
      Average: {{fixed overallStats.averageScore 1}}% &bull;
      Grade: {{or overallStats.grade "N/A"}} &bull;
      Position: {{or overallStats.position "N/A"}} of {{overallStats.totalStudents}}
    </div>
  </div>

  {{#if gradingModel}}
  <div class="grading-key">
    <table>
      <tr>
        <th>Grade</th>
        {{#each gradingModel}}
        <th>{{@key}}</th>
        {{/each}}
      </tr>
      <tr>
        <td><strong>Range</strong></td>
        {{#each gradingModel}}
        <td>{{this.[0]}} - {{this.[1]}}</td>
        {{/each}}
      </tr>
    </table>
  </div>
  {{/if}}

  <div class="remarks-box">
    <div class="remarks-title">Teacher's Remarks</div>
    <div class="remarks-text">
      ____________________________________________________________________________________________________________
    </div>
  </div>

  <div class="signatures">
    <div class="signature-row">
      <span class="signature-label">Class Teacher's Signature:</span>
      <span class="signature-line"></span>
    </div>
    <div class="signature-row">
      <span class="signature-label">Principal's Signature:</span>
      <span class="signature-line"></span>
    </div>
  </div>

</div>

<div class="footer">
  <span>Generated on: {{generatedDate}}</span>
  <span>Powered by Schos</span>
</div>

</body>
</html>
