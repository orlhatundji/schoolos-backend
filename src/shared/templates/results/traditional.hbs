<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Georgia', 'Times New Roman', serif; font-size: 12px; color: #2d2d2d; background: #fff; }

  .page-border {
    border: 3px double #1a3c5e; padding: 3px; margin: 5px;
  }
  .page-inner {
    border: 1px solid #1a3c5e; padding: 15px;
  }

  .header { text-align: center; padding-bottom: 12px; border-bottom: 2px solid #1a3c5e; margin-bottom: 12px; }
  .school-crest {
    width: 60px; height: 60px; border-radius: 50%;
    border: 2px solid #1a3c5e; margin: 0 auto 8px;
    overflow: hidden; background: #f4f1eb;
  }
  .school-crest img { width: 100%; height: 100%; object-fit: contain; padding: 2px; }
  .school-name { font-size: 24px; font-weight: bold; color: #1a3c5e; text-transform: uppercase; letter-spacing: 2px; }
  .school-motto { font-style: italic; color: #5a5a5a; font-size: 11px; margin-top: 3px; }
  .school-address { color: #777; font-size: 10px; margin-top: 2px; }
  .report-title {
    display: inline-block; margin-top: 10px;
    border: 2px solid #1a3c5e; padding: 4px 30px;
    font-size: 14px; font-weight: bold; color: #1a3c5e;
    letter-spacing: 2px; text-transform: uppercase;
  }

  .info-section {
    display: grid; grid-template-columns: 1fr 1fr;
    gap: 4px 20px; margin-bottom: 12px;
    padding: 8px 10px; border: 1px solid #d4c9b0;
    background: #faf8f4;
  }
  .info-row { display: flex; font-size: 11px; padding: 2px 0; }
  .info-label { font-weight: bold; color: #1a3c5e; min-width: 100px; }
  .info-value { color: #2d2d2d; }

  .results-table { width: 100%; border-collapse: collapse; }
  .results-table th, .results-table td { border: 1px solid #1a3c5e; }
  .results-table thead th {
    background: #1a3c5e; color: #f4f1eb;
    padding: 6px 4px; font-size: 10px; text-align: center;
    font-weight: bold; text-transform: uppercase;
  }
  .results-table tbody td {
    padding: 5px 4px; text-align: center; font-size: 10px;
  }
  .results-table tbody tr:nth-child(even) { background: #faf8f4; }
  .subject-name { text-align: left !important; font-weight: bold; padding-left: 8px !important; }
  .total-cell { font-weight: bold; }

  .summary-section {
    margin-top: 10px; padding: 8px 12px;
    border: 2px solid #1a3c5e;
    background: #faf8f4;
  }
  .summary-title { font-size: 12px; font-weight: bold; color: #1a3c5e; text-transform: uppercase; border-bottom: 1px solid #d4c9b0; padding-bottom: 4px; margin-bottom: 6px; }
  .summary-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; text-align: center; }
  .summary-item .label { font-size: 8px; text-transform: uppercase; color: #777; }
  .summary-item .value { font-size: 14px; font-weight: bold; color: #1a3c5e; }

  .grading-key { margin-top: 10px; }
  .grading-key table { border-collapse: collapse; font-size: 9px; font-family: 'Georgia', serif; }
  .grading-key th { background: #1a3c5e; color: #f4f1eb; padding: 3px 8px; border: 1px solid #1a3c5e; }
  .grading-key td { border: 1px solid #1a3c5e; padding: 3px 8px; text-align: center; }

  .remarks-section { margin-top: 10px; }
  .remark-row {
    border-bottom: 1px solid #1a3c5e; padding: 8px 0;
    display: flex; align-items: flex-end;
  }
  .remark-label { font-weight: bold; color: #1a3c5e; font-size: 10px; min-width: 160px; }
  .remark-line { flex: 1; border-bottom: 1px dotted #999; margin-bottom: 2px; }

  .signature-section {
    margin-top: 15px; display: flex; justify-content: space-between;
  }
  .signature-block { text-align: center; width: 40%; }
  .signature-space { border-bottom: 1px solid #1a3c5e; height: 30px; margin-bottom: 4px; }
  .signature-title { font-size: 10px; font-weight: bold; color: #1a3c5e; }

  .footer {
    margin-top: 12px; padding-top: 8px;
    border-top: 2px solid #1a3c5e;
    display: flex; justify-content: space-between;
    font-size: 9px; color: #777; font-style: italic;
  }
</style>
</head>
<body>

<div class="page-border">
<div class="page-inner">

  <div class="header">
    <div class="school-crest">
      <img src="{{logoSrc}}" alt="Crest">
    </div>
    <div class="school-name">{{school.name}}</div>
    {{#if school.motto}}<div class="school-motto">"{{school.motto}}"</div>{{/if}}
    {{#if school.address}}<div class="school-address">{{school.address}}</div>{{/if}}
    <div class="report-title">Academic Report Card</div>
  </div>

  <div class="info-section">
    <div class="info-row">
      <span class="info-label">Student Name:</span>
      <span class="info-value">{{student.fullName}}</span>
    </div>
    <div class="info-row">
      <span class="info-label">Student No:</span>
      <span class="info-value">{{student.studentNo}}</span>
    </div>
    <div class="info-row">
      <span class="info-label">Class:</span>
      <span class="info-value">{{student.classArm.level.name}} {{student.classArm.name}}</span>
    </div>
    <div class="info-row">
      <span class="info-label">Session:</span>
      <span class="info-value">{{academicSession.academicYear}}</span>
    </div>
    <div class="info-row">
      <span class="info-label">Term:</span>
      <span class="info-value">{{term.name}}</span>
    </div>
    <div class="info-row">
      <span class="info-label">Period:</span>
      <span class="info-value">{{termStartDate}} - {{termEndDate}}</span>
    </div>
  </div>

  <table class="results-table">
    <thead>
      <tr>
        <th style="width:28px">S/N</th>
        <th style="text-align:left; padding-left:8px;">Subject</th>
        {{#each assessmentStructures}}
        <th>{{this.name}}<br><small>({{this.maxScore}})</small></th>
        {{/each}}
        <th>Total</th>
        <th>Grade</th>
        <th style="width:70px">Remarks</th>
      </tr>
    </thead>
    <tbody>
      {{#each subjects}}
      <tr>
        <td>{{this.serialNumber}}</td>
        <td class="subject-name">{{this.name}}</td>
        {{#each this.assessments}}
        <td style="font-weight:600;">
          {{#if this.score}}{{this.score}}{{else}}-{{/if}}
        </td>
        {{/each}}
        <td class="total-cell">{{this.totalScore}}</td>
        <td style="font-weight:bold; color:{{this.gradeColor}};">{{or this.grade "-"}}</td>
        <td style="color:{{this.remarkColor}}; font-size:9px; font-weight:bold;">{{this.remark}}</td>
      </tr>
      {{/each}}
    </tbody>
  </table>

  <div class="summary-section">
    <div class="summary-title">Academic Summary</div>
    <div class="summary-grid">
      <div class="summary-item">
        <div class="label">Subjects</div>
        <div class="value">{{overallStats.totalSubjects}}</div>
      </div>
      <div class="summary-item">
        <div class="label">Total Score</div>
        <div class="value">{{overallStats.totalScore}}</div>
      </div>
      <div class="summary-item">
        <div class="label">Average</div>
        <div class="value">{{fixed overallStats.averageScore 1}}%</div>
      </div>
      <div class="summary-item">
        <div class="label">Grade</div>
        <div class="value">{{or overallStats.grade "N/A"}}</div>
      </div>
      <div class="summary-item">
        <div class="label">Position</div>
        <div class="value">{{or overallStats.position "N/A"}}/{{overallStats.totalStudents}}</div>
      </div>
    </div>
  </div>

  {{#if gradingModel}}
  <div class="grading-key">
    <table>
      <tr>
        <th>Grade</th>
        {{#each gradingModel}}
        <th>{{@key}}</th>
        {{/each}}
      </tr>
      <tr>
        <td><strong>Range</strong></td>
        {{#each gradingModel}}
        <td>{{this.[0]}} - {{this.[1]}}</td>
        {{/each}}
      </tr>
    </table>
  </div>
  {{/if}}

  <div class="remarks-section">
    <div class="remark-row">
      <span class="remark-label">Class Teacher's Remark:</span>
      <span class="remark-line"></span>
    </div>
    <div class="remark-row">
      <span class="remark-label">Principal's Remark:</span>
      <span class="remark-line"></span>
    </div>
  </div>

  <div class="signature-section">
    <div class="signature-block">
      <div class="signature-space"></div>
      <div class="signature-title">Class Teacher's Signature</div>
    </div>
    <div class="signature-block">
      <div class="signature-space"></div>
      <div class="signature-title">Principal's Signature</div>
    </div>
  </div>

  <div class="footer">
    <span>Generated on: {{generatedDate}}</span>
    <span>Powered by Schos</span>
  </div>

</div>
</div>

</body>
</html>
